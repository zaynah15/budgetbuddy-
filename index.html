Index ¬∑ HTML
Copy

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#FFB6C1">
<title>Spendora</title>
<link rel="manifest" href="manifest.json">
<link rel="icon" href="logo.png">
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Nunito,sans-serif;background:#FFF8F2;min-height:100vh}
.container{max-width:480px;margin:0 auto;padding:20px}
.card{background:white;border-radius:24px;padding:32px;box-shadow:0 8px 32px rgba(180,140,200,0.15);margin-bottom:20px}
h1{font-size:32px;font-weight:900;background:linear-gradient(135deg,#FFB6C1,#c8a0e0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
.btn{width:100%;background:linear-gradient(135deg,#FFB6C1,#c8a0e0);color:white;border:none;border-radius:16px;padding:16px 24px;font-size:16px;font-weight:900;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:12px}
.btn:hover{opacity:0.9}
@keyframes spin{to{transform:rotate(360deg)}}
.loading{animation:spin 1s linear infinite}
</style>
</head>
<body>
<div id="root">
  <div class="container">
    <div class="card" style="text-align:center;margin-top:60px">
      <img src="logo.png" style="width:120px;height:120px;margin-bottom:24px">
      <h1>Spendora</h1>
      <p style="font-size:16px;font-weight:800;color:#b09cc0;margin-bottom:32px">Your Wallet's Glow-Up.</p>
      <div style="background:#e8f5e9;border:2px solid #4caf50;border-radius:16px;padding:16px;margin-bottom:20px">
        <div style="font-size:18px;margin-bottom:8px">‚ö° Loading...</div>
        <div style="font-size:14px;color:#2e7d32">App is starting up. Please wait...</div>
      </div>
      <div class="loading" style="width:40px;height:40px;border:4px solid #f0e2ff;border-top-color:#FFB6C1;border-radius:50%;margin:20px auto"></div>
    </div>
  </div>
</div>

<script type="text/babel">
console.log('üöÄ Spendora starting...');

const firebaseConfig = {
  apiKey: "AIzaSyAyIwTNZB0mYWYPViDiHhYQsrc-DTyWmrk",
  authDomain: "budgetbuddy-4168c.firebaseapp.com",
  projectId: "budgetbuddy-4168c",
  storageBucket: "budgetbuddy-4168c.firebasestorage.app",
  messagingSenderId: "943210794388",
  appId: "1:943210794388:web:88940dc98f36240ec7d381"
};

let auth, db;
try {
  if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
  auth = firebase.auth();
  db = firebase.firestore();
  console.log('‚úÖ Firebase initialized');
} catch(e) {
  console.error('‚ùå Firebase error:', e);
}

const {useState, useEffect} = React;

function App() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    console.log('üîÑ Setting up auth listener...');
    try {
      const unsubscribe = auth.onAuthStateChanged(
        (u) => {
          console.log('üë§ Auth state:', u ? 'Signed in' : 'Not signed in');
          setLoading(false);
          setUser(u);
        },
        (err) => {
          console.error('‚ùå Auth error:', err);
          setError(err.message);
          setLoading(false);
        }
      );
      return unsubscribe;
    } catch(e) {
      console.error('‚ùå Setup error:', e);
      setError(e.message);
      setLoading(false);
    }
  }, []);

  const signIn = async () => {
    try {
      console.log('üîê Starting sign in...');
      await auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
      console.log('‚úÖ Sign in successful');
    } catch(e) {
      console.error('‚ùå Sign in error:', e);
      alert('Sign in failed: ' + e.message);
    }
  };

  if (loading) {
    return (
      <div className="container">
        <div className="card" style={{textAlign:'center', marginTop:'60px'}}>
          <img src="logo.png" style={{width:120, height:120, marginBottom:24}} />
          <h1>Spendora</h1>
          <p style={{fontSize:16, fontWeight:800, color:'#b09cc0', marginBottom:32}}>Your Wallet's Glow-Up.</p>
          <div style={{background:'#fff3cd', border:'2px solid #ffc107', borderRadius:16, padding:16, marginBottom:20}}>
            <div style={{fontSize:18, marginBottom:8}}>üîÑ Loading...</div>
            <div style={{fontSize:14, color:'#856404'}}>Connecting to Firebase...</div>
          </div>
          <div className="loading" style={{width:40, height:40, border:'4px solid #f0e2ff', borderTopColor:'#FFB6C1', borderRadius:'50%', margin:'20px auto'}}></div>
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="container">
        <div className="card" style={{textAlign:'center', marginTop:'60px'}}>
          <h1>Error</h1>
          <div style={{background:'#fff0f0', border:'2px solid #ff6b6b', borderRadius:16, padding:16, marginTop:20}}>
            <div style={{fontSize:16, fontWeight:700, color:'#ff6b6b', marginBottom:8}}>‚ùå Something went wrong</div>
            <div style={{fontSize:14, color:'#c92a2a'}}>{error}</div>
          </div>
          <button onClick={() => window.location.reload()} className="btn" style={{marginTop:20}}>
            Reload App
          </button>
        </div>
      </div>
    );
  }

  if (!user) {
    return (
      <div className="container">
        <div className="card" style={{textAlign:'center', marginTop:'60px'}}>
          <img src="logo.png" style={{width:120, height:120, marginBottom:24}} />
          <h1>Spendora</h1>
          <p style={{fontSize:16, fontWeight:800, color:'#b09cc0', marginBottom:32}}>Your Wallet's Glow-Up.</p>
          
          <button onClick={signIn} className="btn">
            <svg width="20" height="20" viewBox="0 0 24 24">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Continue with Google
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="container">
      <div className="card" style={{marginTop:'60px'}}>
        <div style={{display:'flex', alignItems:'center', gap:12, marginBottom:24}}>
          <img src={user.photoURL} style={{width:48, height:48, borderRadius:'50%', border:'2px solid #FFB6C1'}} />
          <div>
            <div style={{fontSize:18, fontWeight:900, color:'#7c5a8a'}}>Welcome, {user.displayName?.split(' ')[0]}!</div>
            <button onClick={() => auth.signOut()} style={{fontSize:12, fontWeight:700, color:'#b09cc0', background:'none', border:'none', cursor:'pointer', padding:0}}>Sign Out</button>
          </div>
        </div>

        <div style={{background:'#e8f5e9', border:'2px solid #4caf50', borderRadius:16, padding:20, textAlign:'center'}}>
          <div style={{fontSize:24, marginBottom:12}}>‚úÖ</div>
          <div style={{fontSize:18, fontWeight:900, color:'#2e7d32', marginBottom:8}}>App is Working!</div>
          <div style={{fontSize:14, color:'#1b5e20', lineHeight:1.6}}>
            Sign-in successful!<br/>
            Firebase connected ‚úì<br/>
            Ready to add full features!
          </div>
        </div>

        <div style={{marginTop:20, padding:16, background:'#f9f6ff', borderRadius:12, fontSize:13, color:'#7c5a8a', lineHeight:1.8}}>
          <strong>Next step:</strong> Once this is working, I'll add all the features back (monthly stars, yearly report, bucket history, notifications, etc.)
        </div>
      </div>
    </div>
  );
}

try {
  console.log('üé® Rendering app...');
  ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  console.log('‚úÖ App rendered successfully');
} catch(e) {
  console.error('‚ùå Render error:', e);
  document.getElementById('root').innerHTML = `
    <div class="container">
      <div class="card" style="text-align:center;margin-top:60px">
        <h1>Error</h1>
        <div style="background:#fff0f0;border:2px solid #ff6b6b;border-radius:16px;padding:16px;margin-top:20px">
          <div style="font-size:16px;font-weight:700;color:#ff6b6b">‚ùå Failed to start app</div>
          <div style="font-size:14px;color:#c92a2a;margin-top:8px">${e.message}</div>
        </div>
      </div>
    </div>
  `;
}

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/budgetbuddy/sw.js').catch(e => console.log('SW registration failed:', e));
  });
}
</script>
</body>
</html>
